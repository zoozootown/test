{"version":3,"sources":["Constant.ts","Actions.ts","Header.tsx","MainWidthStyle.tsx","Menu.tsx","Article.tsx","PageNavigator.tsx","Utils.ts","NewArticles.tsx","App.tsx","PageManager.ts","Reducer.ts","serviceWorker.ts","index.tsx"],"names":["PropName","ARTICLE_DATA_URL","ActionType","HTTP_YOUTUBE_URL","HTTPS_YOUTUBE_URL","Header","className","to","src","alt","width","height","MainWidthStyle","props","style","children","Menu","dispatch","useDispatch","articlesPerPage","useSelector","state","ARTICLES_PER_PAGE","type","value","onChange","e","target","name","UPDATE_DATA","payload","setArticlesPerPage","parseInt","id","Article","embedcode","ARTICLE_DATA","EMBEDCODE","dangerouslySetInnerHTML","__html","PageNavigator","previousPageNo","PREVIOUS_PAGE_NO","nextPageNo","NEXT_PAGE_NO","Utils","window","scroll","element","document","getElementById","scrollIntoView","title","path","sendAccessLog","error","console","log","twttr","widgets","load","NewArticles","activePageNo","useParams","ACTIVE_PAGE_NO","useEffect","scrollToTop","setTitle","location","pathname","hash","setActivePageNo","activeDataList","ACTIVE_ARTICLE_DATA_LIST","loadTwitter","map","articleData","index","key","App","fetch","then","response","json","articleDataList","feed","entry","item","$t","push","reverse","ARTICLE_DATA_LIST","setArticleDataList","exact","component","render","PageManagerFactory","articleDataListSize","newLoopPageManager","NormalPageManager","LoopPageManager","pageNo","lastPageNo","this","getLastPageNo","correctPageNo","Math","ceil","getArticlesPerPage","getActivePageNo","getActivePageFirstDataIndex","INITIAL_STATE","StateBuilder","changedPropNames","Set","Object","keys","filter","removeEmptyDataFilter","pageManager","newDefaultPageManager","length","getPreviousPageNo","getNextPageNo","slice","getActivePageLastDataIndex","httpToHttpsMapper","newArticleData","replace","Boolean","hostname","match","persistConfig","storage","whitelist","persistedReducer","persistReducer","action","build","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","pstore","persistStore","ReactDOM","loading","persistor","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3a01c9aa.chunk.js","sourcesContent":["// propsとstateで利用するプロパティ名\r\nexport enum PropName {\r\n    ACTIVE_PAGE_NO = 'activePageNo',\r\n    PREVIOUS_PAGE_NO = 'previousPageNo',\r\n    NEXT_PAGE_NO = 'nextPageNo',\r\n\r\n    ARTICLES_PER_PAGE = 'articlesPerPage',\r\n    \r\n    ARTICLE_DATA = 'articleData',\r\n    ARTICLE_DATA_LIST = 'articleDataList',\r\n    ACTIVE_ARTICLE_DATA_LIST = 'activeArticleDataList',\r\n\r\n    EMBEDCODE = 'embedcode',// データベースの列名(googleの仕様上アンダーバーが消える)\r\n}\r\n\r\nexport interface ArticleDataType {\r\n    [PropName.EMBEDCODE]: string;\r\n}\r\n\r\nexport const SPREADSHEET_ID: string =\r\n    '1jDoKicjNhz0ZOJRGP0K3Dw-4ioqcc1xsLyOYz0cM_rU';\r\n\r\nexport const ARTICLE_DATA_URL: string = getSpreadsheetURL(SPREADSHEET_ID);\r\n\r\nfunction getSpreadsheetURL(spreadsheetID: string): string {\r\n    return `https://spreadsheets.google.com/feeds/list/${spreadsheetID}/od6/public/values?alt=json`;\r\n}\r\n\r\nexport const HTTP_YOUTUBE_URL: string = 'http://youtube.com';\r\nexport const HTTPS_YOUTUBE_URL: string = 'https://youtube.com';","import { Action } from \"redux\";\r\nimport { ArticleDataType, PropName } from \"./Constant\";\r\nimport { StoreStateType } from \"./Reducer\";\r\n\r\nexport enum ActionType {\r\n    UPDATE_DATA\r\n}\r\n\r\nexport type PayloadType = Partial<StoreStateType>;\r\n\r\nexport interface ActionObjectType extends Action {\r\n    type: ActionType;\r\n    payload: PayloadType;\r\n}\r\n\r\nexport function setArticlesPerPage(articlesPerPage: number): ActionObjectType {\r\n    return {\r\n        type: ActionType.UPDATE_DATA,\r\n        payload: {\r\n            [PropName.ARTICLES_PER_PAGE]: articlesPerPage\r\n        }\r\n    };\r\n}\r\n\r\n\r\nexport function setActivePageNo(activePageNo: number): ActionObjectType {\r\n    return {\r\n        type: ActionType.UPDATE_DATA,\r\n        payload: {\r\n            [PropName.ACTIVE_PAGE_NO]: activePageNo\r\n        }\r\n    };\r\n}\r\n\r\nexport function setArticleDataList(articleDataList: ArticleDataType[]):\r\n    ActionObjectType {\r\n    return {\r\n        type: ActionType.UPDATE_DATA,\r\n        payload: {\r\n            [PropName.ARTICLE_DATA_LIST]: articleDataList\r\n        }\r\n    };\r\n}\r\n","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Header: React.FC = () => {\r\n  return (\r\n    <>\r\n      <div className=\"text-right\">\r\n      <Link to={`/menu`}>\r\n        <img src=\"justify.svg\" alt=\"\" width=\"50\" height=\"50\" />\r\n      </Link>\r\n    </div >\r\n      <div>\r\n        <Link to=\"/1\" >\r\n          <img src=\"top.png\" alt=\"top\" />\r\n        </Link>\r\n      </div>\r\n    </>\r\n\r\n  );\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\n\r\ninterface PropType {\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst MainWidthStyle: React.FC<PropType> = (props: PropType) => {\r\n  return (\r\n    <div className=\"mx-auto\" style={{ width: '600px' }}>\r\n      {props.children}\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default MainWidthStyle;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { StoreStateType } from './Reducer';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { PropName } from './Constant';\r\nimport { setArticlesPerPage } from './Actions';\r\n\r\nconst Menu: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  const articlesPerPage: number =\r\n    useSelector<StoreStateType, number>(\r\n      state => state[PropName.ARTICLES_PER_PAGE]\r\n    );\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    switch (e.target.name) {\r\n      case PropName.ARTICLES_PER_PAGE: {\r\n        dispatch(setArticlesPerPage(parseInt(e.target.value)));\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column\">\r\n      <div className=\"card m-2\">\r\n        <div className=\"card-header\">\r\n          記事表示数\r\n        </div>\r\n        <div className=\"card-body mx-auto\">\r\n          <input type=\"number\" value={articlesPerPage}\r\n            onChange={handleChange} className=\"form-control\"\r\n            name={PropName.ARTICLES_PER_PAGE} id={PropName.ARTICLES_PER_PAGE} />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card m-2\">\r\n        <div className=\"card-header\">\r\n          このサイトを紹介する\r\n        </div>\r\n        <div className=\"card-body mx-auto\">\r\n          <img src=\"qr.png\" alt=\"qrcode\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mx-auto\">\r\n        <Link to=\"/1\" >\r\n          <img src=\"navigationj_home.png\" alt=\"top\" />\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Menu;","import React from 'react';\r\nimport { ArticleDataType, PropName } from './Constant';\r\n\r\ninterface PropType {\r\n  [PropName.ARTICLE_DATA]: ArticleDataType;\r\n}\r\n\r\nconst Article: React.FC<PropType> = (props: PropType) => {\r\n  const embedcode: string = props[PropName.ARTICLE_DATA][PropName.EMBEDCODE];\r\n\r\n  return (\r\n    <div className=\"card m-2\">\r\n      <div className=\"card-body\">\r\n        <div dangerouslySetInnerHTML={{\r\n          __html: embedcode\r\n        }}>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Article;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from \"react-router-dom\";\r\nimport { PropName } from './Constant';\r\nimport { StoreStateType } from './Reducer';\r\n\r\nconst PageNavigator: React.FC = () => {\r\n  const previousPageNo: number =\r\n    useSelector<StoreStateType, number>(state => state[PropName.PREVIOUS_PAGE_NO]);\r\n\r\n  const nextPageNo: number =\r\n    useSelector<StoreStateType, number>(state => state[PropName.NEXT_PAGE_NO]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"mx-auto fixed-bottom p-2 d-flex justify-content-around\"\r\n        style={{ width: 'inherit' }}>\r\n        <div>\r\n          <Link to={`${previousPageNo}`} >\r\n            <img src=\"navigationj_prev.png\" alt=\"prev\" />\r\n          </Link>\r\n        </div>\r\n        <div>\r\n          <Link to={`${nextPageNo}`}>\r\n            <img src=\"navigationj_next.png\" alt=\"next\" />\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ height: \"112px\" }}>\r\n        {\r\n          //float margin\r\n        }\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PageNavigator;","export default class Utils {\r\n    public static scrollToTop(): void {\r\n        window.scroll(0, 0);\r\n    }\r\n\r\n    public static scrollToElement(id: string): void {\r\n        const element: HTMLElement | null = document.getElementById(id);\r\n        if (element != null) {\r\n            element.scrollIntoView(true);\r\n        }\r\n    }\r\n\r\n    public static setTitle(title: string): void {\r\n        document.title = title;\r\n    }\r\n\r\n    public static sendAccessLog(path: string): void {\r\n        // for Google Analytics\r\n        // index.htmlで定義している関数\r\n        // HACK\r\n        try {\r\n            (window as any).sendAccessLog(path);\r\n        } catch (error) {\r\n            console.log('sendAccessLogError');\r\n        }\r\n    }\r\n\r\n    public static loadTwitter(): void {\r\n        // for twitter\r\n        // index.htmlで定義している関数\r\n        // HACK\r\n        try {\r\n            (window as any).twttr.widgets.load();\r\n        } catch (error) {\r\n            console.log('loadTwitterError');\r\n        }\r\n    }\r\n}","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router';\r\nimport { setActivePageNo } from './Actions';\r\nimport Article from './Article';\r\nimport { ArticleDataType, PropName } from './Constant';\r\nimport PageNavigator from './PageNavigator';\r\nimport { StoreStateType } from './Reducer';\r\nimport Utils from './Utils';\r\n\r\ninterface RouterParamType {\r\n  [PropName.ACTIVE_PAGE_NO]: string;\r\n}\r\n\r\nconst NewArticles: React.FC = () => {\r\n  const activePageNo = parseInt(useParams<RouterParamType>()[PropName.ACTIVE_PAGE_NO]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    Utils.scrollToTop();\r\n    Utils.setTitle(`zoo zoo town - page ${activePageNo}`);\r\n    Utils.sendAccessLog(window.location.pathname + window.location.hash);\r\n    dispatch(setActivePageNo(activePageNo));\r\n  }, [activePageNo, dispatch]\r\n  );\r\n\r\n  const activeDataList: ArticleDataType[] =\r\n    useSelector<StoreStateType, ArticleDataType[]>(\r\n      state => state[PropName.ACTIVE_ARTICLE_DATA_LIST]\r\n    );\r\n\r\n  useEffect(Utils.loadTwitter, [activeDataList]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"d-flex flex-column align-items-center\" >\r\n        {activeDataList.map((articleData, index) =>\r\n          <Article articleData={articleData} key={index} />\r\n        )}\r\n      </div>\r\n      <PageNavigator />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NewArticles;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport { setArticleDataList } from './Actions';\r\nimport { ArticleDataType, ARTICLE_DATA_URL, PropName } from './Constant';\r\nimport Header from \"./Header\";\r\nimport MainWidthStyle from './MainWidthStyle';\r\nimport Menu from './Menu';\r\nimport NewArticles from './NewArticles';\r\n\r\nconst App: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    console.log('fetch');\r\n    fetch(ARTICLE_DATA_URL)\r\n      .then(response => response.json())\r\n      .then(json => {\r\n        const articleDataList: ArticleDataType[] = [];\r\n        for (const item of json.feed.entry) {\r\n          const articleData: ArticleDataType = {\r\n            [PropName.EMBEDCODE]: item[`gsx$${[PropName.EMBEDCODE]}`].$t\r\n          };\r\n          articleDataList.push(articleData);\r\n        }\r\n        articleDataList.reverse();// 新しいもの順に並べ替える\r\n        dispatch(setArticleDataList(articleDataList));\r\n      });\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <MainWidthStyle>\r\n        <Header />\r\n      </MainWidthStyle>\r\n\r\n      <section id=\"main\">\r\n        <MainWidthStyle>\r\n          <Switch>\r\n            <Route exact path={`/menu`} component={Menu} />\r\n            <Route exact path={`/:${PropName.ACTIVE_PAGE_NO}`} component={NewArticles} />\r\n\r\n            // 上記のパスに一致しないものは1ページ目にとばす\r\n            <Route render={\r\n              (): JSX.Element => <Redirect to=\"/1\" />\r\n            } />\r\n          </Switch>\r\n        </MainWidthStyle>\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;","const FIRST_PAGE_NO: number = 1;\r\n\r\nexport interface PageManager {\r\n    getPreviousPageNo(): number;\r\n    getActivePageNo(): number;\r\n    getNextPageNo(): number;\r\n    getLastPageNo(): number;\r\n    getArticlesPerPage(): number;\r\n    getActivePageFirstDataIndex(): number;\r\n    getActivePageLastDataIndex(): number;\r\n}\r\n\r\nexport class PageManagerFactory {\r\n    static newDefaultPageManager(articleDataListSize: number,\r\n        articlesPerPage: number,\r\n        activePageNo: number): PageManager {\r\n        return PageManagerFactory.newLoopPageManager(articleDataListSize,\r\n            articlesPerPage,\r\n            activePageNo);\r\n    }\r\n\r\n    static newNormalPageManager(articleDataListSize: number,\r\n        articlesPerPage: number,\r\n        activePageNo: number): PageManager {\r\n        return new NormalPageManager(articleDataListSize,\r\n            articlesPerPage,\r\n            activePageNo);\r\n    }\r\n\r\n    static newLoopPageManager(articleDataListSize: number,\r\n        articlesPerPage: number,\r\n        activePageNo: number): PageManager {\r\n        return new LoopPageManager(articleDataListSize,\r\n            articlesPerPage,\r\n            activePageNo);\r\n    }\r\n}\r\n\r\nclass NormalPageManager implements PageManager {\r\n    constructor(private articleDataListSize: number,\r\n        private articlesPerPage: number,\r\n        private activePageNo: number) {\r\n    }\r\n\r\n    protected correctPageNo(pageNo: number): number {\r\n        const lastPageNo: number = this.getLastPageNo();\r\n\r\n        if (pageNo < FIRST_PAGE_NO) {// 下限\r\n            return FIRST_PAGE_NO;\r\n        } else if (lastPageNo < pageNo) {// 上限\r\n            return lastPageNo;\r\n        } else {// 正常値\r\n            return pageNo;\r\n        }\r\n    }\r\n\r\n    getPreviousPageNo(): number {\r\n        return this.correctPageNo(this.activePageNo - 1);\r\n    }\r\n\r\n    getActivePageNo(): number {\r\n        return this.correctPageNo(this.activePageNo);\r\n    }\r\n\r\n    getNextPageNo(): number {\r\n        return this.correctPageNo(this.activePageNo + 1);\r\n    }\r\n\r\n    getLastPageNo(): number {\r\n        return Math.ceil(this.articleDataListSize / this.getArticlesPerPage());\r\n    }\r\n\r\n    getArticlesPerPage(): number {\r\n        const articlesPerPage: number = this.articlesPerPage;\r\n\r\n        if (articlesPerPage < 1) {// 下限\r\n            return 1;\r\n        } else if (20 < articlesPerPage) {// 上限\r\n            return 20;\r\n        } else {// 正常値\r\n            return articlesPerPage;\r\n        }\r\n    }\r\n\r\n    getActivePageFirstDataIndex(): number {\r\n        return (this.getActivePageNo() - 1) * this.getArticlesPerPage();\r\n    }\r\n\r\n    getActivePageLastDataIndex(): number {\r\n        return this.getActivePageFirstDataIndex() + this.getArticlesPerPage();\r\n    }\r\n}\r\n\r\nclass LoopPageManager extends NormalPageManager {\r\n    protected correctPageNo(pageNo: number): number {\r\n        const lastPageNo: number = this.getLastPageNo();\r\n\r\n        if (pageNo < FIRST_PAGE_NO) {// 下限\r\n            return (pageNo % lastPageNo) + lastPageNo;\r\n        } else if (lastPageNo < pageNo) {// 上限\r\n            return pageNo % lastPageNo;\r\n        } else {// 正常値\r\n            return pageNo;\r\n        }\r\n    }\r\n}","import { ActionObjectType, ActionType, PayloadType } from \"./Actions\";\r\nimport { ArticleDataType, HTTPS_YOUTUBE_URL, HTTP_YOUTUBE_URL, PropName } from \"./Constant\";\r\nimport { PageManager, PageManagerFactory } from \"./PageManager\";\r\n\r\nexport interface StoreStateType {\r\n    [PropName.ACTIVE_PAGE_NO]: number;\r\n    [PropName.PREVIOUS_PAGE_NO]: number;\r\n    [PropName.NEXT_PAGE_NO]: number;\r\n    [PropName.ARTICLES_PER_PAGE]: number;\r\n    [PropName.ARTICLE_DATA_LIST]: ArticleDataType[];\r\n    [PropName.ACTIVE_ARTICLE_DATA_LIST]: ArticleDataType[];\r\n}\r\n\r\nconst INITIAL_STATE: StoreStateType = {\r\n    [PropName.ACTIVE_PAGE_NO]: 1,\r\n    [PropName.PREVIOUS_PAGE_NO]: 1,\r\n    [PropName.NEXT_PAGE_NO]: 1,\r\n    [PropName.ARTICLES_PER_PAGE]: 5,\r\n    [PropName.ARTICLE_DATA_LIST]: [],\r\n    [PropName.ACTIVE_ARTICLE_DATA_LIST]: []\r\n};\r\n\r\nexport default function Reducer(state = INITIAL_STATE, action: ActionObjectType): StoreStateType {\r\n    switch (action.type) {\r\n        case ActionType.UPDATE_DATA: {\r\n            return new StateBuilder(state, action.payload).build();\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n\r\nclass StateBuilder {\r\n    private state: StoreStateType;\r\n    private changedPropNames: Set<string>;\r\n\r\n    constructor(state: StoreStateType, payload: PayloadType) {\r\n        this.state = { ...state, ...payload };\r\n\r\n        this.changedPropNames = new Set(Object.keys(payload));\r\n    }\r\n\r\n    build(): StoreStateType {\r\n        const articleDataList: ArticleDataType[] = this.state[PropName.ARTICLE_DATA_LIST]\r\n            .filter(removeEmptyDataFilter);\r\n\r\n        const pageManager: PageManager =\r\n            PageManagerFactory.newDefaultPageManager(\r\n                articleDataList.length, this.state[PropName.ARTICLES_PER_PAGE], this.state[PropName.ACTIVE_PAGE_NO]);\r\n\r\n        // fetchされる前はarticleDataListが空なのでpageManagerを使用するとページが0になる\r\n        // this.state[PropName.ACTIVE_PAGE_NO] = pageManager.getActivePageNo();\r\n\r\n        this.state[PropName.PREVIOUS_PAGE_NO] = pageManager.getPreviousPageNo();\r\n        this.state[PropName.NEXT_PAGE_NO] = pageManager.getNextPageNo();\r\n        this.state[PropName.ARTICLES_PER_PAGE] = pageManager.getArticlesPerPage();\r\n        this.state[PropName.ARTICLE_DATA_LIST] = articleDataList;\r\n        this.state[PropName.ACTIVE_ARTICLE_DATA_LIST] = articleDataList.slice(\r\n            pageManager.getActivePageFirstDataIndex(),\r\n            pageManager.getActivePageLastDataIndex())\r\n            .map(httpToHttpsMapper);\r\n\r\n        return this.state;\r\n    }\r\n}\r\n\r\nfunction removeEmptyDataFilter(articleData: ArticleDataType): boolean {\r\n    return articleData[PropName.EMBEDCODE] !== '';\r\n}\r\n\r\n// 埋め込みコード内のURLがhttpになっているのでエラー防止のためにhttpsに置換する\r\nfunction httpToHttpsMapper(articleData: ArticleDataType): ArticleDataType {\r\n    let newArticleData: ArticleDataType = { ...articleData }; //deep copy\r\n    newArticleData[PropName.EMBEDCODE] =\r\n        newArticleData[PropName.EMBEDCODE].replace(HTTP_YOUTUBE_URL, HTTPS_YOUTUBE_URL);\r\n    return newArticleData;\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from \"react-redux\";\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { createStore } from 'redux';\r\nimport { persistReducer, persistStore } from 'redux-persist';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport App from './App';\r\nimport { PropName } from './Constant';\r\nimport './index.css';\r\nimport Reducer from './Reducer';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nconst persistConfig = {\r\n    key: 'root',\r\n    storage,\r\n    whitelist: [PropName.ARTICLES_PER_PAGE],\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, Reducer);\r\n\r\n// HACK\r\nconst store = createStore(persistedReducer, (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__());\r\nconst pstore = persistStore(store as any);\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <PersistGate loading={<p>loading...</p>} persistor={pstore}>\r\n            <Router>\r\n                <App />\r\n            </Router >\r\n        </PersistGate>\r\n    </Provider>,\r\n    document.getElementById('root'));\r\nserviceWorker.unregister();"],"sourceRoot":""}